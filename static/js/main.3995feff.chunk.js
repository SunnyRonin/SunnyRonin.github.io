(this.webpackJsonpjira_0=this.webpackJsonpjira_0||[]).push([[0],{288:function(e,t,n){},291:function(e,t){},487:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);var c=n(35),s=n.n(c),i=(n(288),n(29));const o="__auth-provider_token__",d="http://online.com",l=e=>{let{user:t}=e;return window.localStorage.setItem(o,t.token||""),t},j=e=>fetch("".concat(d,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>e.ok?l(await e.json()):Promise.reject(await e.json())),b=e=>fetch("".concat(d,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>e.ok?l(await e.json()):Promise.reject(await e.json())),O=async()=>window.localStorage.removeItem(o);var u=n(3);const h=e=>{const t=Object(u.a)({},e);return Object.keys(t).forEach(e=>{(e=>void 0===e||null===e||""===e)(t[e])&&delete t[e]}),t},m=(e,t)=>{const[n,a]=Object(r.useState)(e);return Object(r.useEffect)(()=>{const n=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(n)}},[e,t]),n},p=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Object(r.useRef)(document.title).current;Object(r.useEffect)(()=>{document.title=e},[e]),Object(r.useEffect)(()=>()=>{t||(document.title=n)},[t,n])},x=()=>window.location.href=window.localStorage.origin;var g=n(9),v=n(271),f=n.n(v);const y=["data","token","headers"],C=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:n,token:r,headers:a}=t,c=Object(g.a)(t,y);const s=Object(u.a)({method:"GET",headers:{Authorization:r?"".concat(r):"","Content-type":n?"application/json":""}},c);return"GET"===s.method.toLocaleUpperCase()?e+="?".concat(f.a.stringify(n)):s.body=JSON.stringify(n||{}),window.fetch("".concat("http://online.com","/").concat(e),s).then(async e=>{if(401===e.status)return await O(),window.location.reload(),Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55"});const t=await e.json();return e.ok?t:Promise.reject(t)})},k=()=>{const{user:e}=Q();return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let[a,c]=n;return C(a,Object(u.a)(Object(u.a)({},c),{},{token:null===e||void 0===e?void 0:e.token}))}},L={stat:"idle",data:null,error:null},I={throwOnError:!1},w=e=>{const t=(()=>{const e=Object(r.useRef)(!1);return Object(r.useEffect)(()=>(e.current=!0,()=>{e.current=!1})),e})();return Object(r.useCallback)(function(){return t.current?e(...arguments):void 0},[e,t])},E=(e,t)=>{const n=Object(u.a)(Object(u.a)({},I),{},{initialConfig:t}),[a,c]=Object(r.useReducer)((e,t)=>Object(u.a)(Object(u.a)({},e),t),Object(u.a)(Object(u.a)({},L),e)),[s,i]=Object(r.useState)(()=>()=>{}),o=w(c),d=Object(r.useCallback)(e=>o({data:e,stat:"success",error:null}),[o]),l=Object(r.useCallback)(e=>o({error:e,stat:"error",data:null}),[o]),j=Object(r.useCallback)((e,t)=>{if(!e||!e.then)throw new Error("\u8f93\u5165Promise\u7c7b\u578b\u6570\u636e");return i(()=>()=>{null!==t&&void 0!==t&&t.retry&&j(null===t||void 0===t?void 0:t.retry(),t)}),o({stat:"loading"}),e.then(e=>(d(e),e)).catch(e=>(l(e),n.throwOnError?Promise.reject(e):e))},[n.throwOnError,o,d,l]);return Object(u.a)(Object(u.a)({isIdle:"idle"===a.stat,isLoading:"loading"===a.stat,isError:"error"===a.stat,IsSuccess:"success"===a.stat,run:j,setData:d,setError:l},a),{},{retry:s})};var T,M,P,S,F=n(30),N=n(182),R=n(493),D=n(73),Z=n(149),z=n(6);const A=F.a.div(T||(T=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin-bottom: ",";\n\n  > * {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    margin-right: ",";\n  }\n"])),e=>e.between?"space-between":void 0,e=>e.marginBottom+"rem",e=>"number"===typeof e.gap?e.gap+"rem":e.gap?"2rem":void 0),Y=F.a.div(M||(M=Object(i.a)(["\n  height: 100vh;\n  display:flex;\n  justify-content:center;\n  align-items:center\n"]))),B=()=>Object(z.jsx)(Y,{children:Object(z.jsx)(N.a,{size:"large"})}),q=e=>{let{error:t}=e;return Object(z.jsxs)(Y,{children:[Object(z.jsx)(Z.a,{}),Object(z.jsx)(_,{error:t})]})},_=e=>{let{error:t}=e;return(null===(n=t)||void 0===n?void 0:n.message)?Object(z.jsx)(R.a.Text,{type:"danger",children:null===t||void 0===t?void 0:t.message}):null;var n},V=Object(F.a)(D.a)(P||(P=Object(i.a)(["\n  padding:0\n"]))),H=F.a.div(S||(S=Object(i.a)(["\n  padding:3.2rem;\n  width:100%;\n  display:flex;\n  flex-direction:column;\n"])));var J=n(184);const K=async()=>{let e=null;const t=window.localStorage.getItem(o);if(t){e=(await C("me",{token:t})).user}return e},U=a.a.createContext(void 0);U.displayName="AuthContext";const G=e=>{let{children:t}=e;const{data:n,error:a,isLoading:c,isIdle:s,isError:i,run:o,setData:d}=E(),l=Object(J.b)();var u;return u=()=>{o(K())},Object(r.useEffect)(()=>{u()},[]),s||c?Object(z.jsx)(B,{}):i?Object(z.jsx)(q,{error:a}):Object(z.jsx)(U.Provider,{children:t,value:{user:n,login:e=>j(e).then(e=>d(e)),register:e=>b(e).then(e=>d(e)),logout:()=>O().then(()=>{d(null),l.clear()})}})},Q=()=>{const e=a.a.useContext(U);if(!e)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return e};var W,X;const $=["title","titleId"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(null,arguments)}function te(e,t){let{title:n,titleId:a}=e,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,$);return r.createElement("svg",ee({viewBox:"0 0 179 32",xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true",className:"css-sq9aeg-Logo",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,W||(W=r.createElement("defs",null,r.createElement("linearGradient",{x1:"97.6553341%",y1:"35.6591143%",x2:"37.202032%",y2:"75.4891864%",id:"uid392-1"},r.createElement("stop",{stopColor:"#0052CC",offset:"7%"}),r.createElement("stop",{stopColor:"#2684FF",offset:"100%"})),r.createElement("linearGradient",{x1:"8.43371138%",y1:"60.1495759%",x2:"64.1161517%",y2:"23.5790285%",id:"uid392-2"},r.createElement("stop",{stopColor:"#0052CC",offset:"0%"}),r.createElement("stop",{stopColor:"#2684FF",offset:"100%"})))),X||(X=r.createElement("g",{stroke:"none",strokeWidth:1,fillRule:"nonzero"},r.createElement("path",{d:"M11.3881081,27.9242105 C12.4881804,26.8071817 13.1062496,25.2917664 13.1062496,23.7115789 C13.1062496,22.1313915 12.4881804,20.6159762 11.3881081,19.4989474 L11.3881081,19.4989474 L3.74837838,11.7621053 L0.273513514,15.2926316 C-0.0900771727,15.6625064 -0.0900771727,16.2617042 0.273513514,16.6315789 L11.3881081,27.9242105 L11.3881081,27.9242105 Z",fill:"currentColor",fillRule:"nonzero"}),r.createElement("path",{d:"M22.5027027,15.2926316 L11.3881081,4 L11.3881081,4 L11.3539189,4.03473684 L11.3539189,4.03473684 C9.08852466,6.36456187 9.09963243,10.1156459 11.3787838,12.4315789 L19.0247297,20.1652632 L22.5027027,16.6315789 C22.8662934,16.2617042 22.8662934,15.6625064 22.5027027,15.2926316 Z",fill:"currentColor",fillRule:"nonzero"}),r.createElement("path",{d:"M11.3881081,12.4252632 C9.10895676,10.1093301 9.09784899,6.35824608 11.3632432,4.02842105 L3.43445946,12.0810526 L7.58067568,16.2936842 L11.3881081,12.4252632 Z",fill:"url(#uid392-1)",fillRule:"nonzero"}),r.createElement("path",{d:"M15.1893243,15.6368421 L11.3881081,19.4989474 C12.4881804,20.6159762 13.1062496,22.1313915 13.1062496,23.7115789 C13.1062496,25.2917664 12.4881804,26.8071817 11.3881081,27.9242105 L19.3355405,19.8494737 L15.1893243,15.6368421 Z",fill:"url(#uid392-2)",fillRule:"nonzero"}),r.createElement("path",{d:"M36.07,18.956 C36.07,20.646 35.394,21.842 33.418,21.842 C32.56,21.842 31.702,21.686 31,21.4 L31,23.662 C31.65,23.896 32.586,24.104 33.808,24.104 C37.032,24.104 38.41,21.946 38.41,18.8 L38.41,6.918 L36.07,6.918 L36.07,18.956 Z M41.894,7.568 C41.894,8.556 42.544,9.128 43.454,9.128 C44.364,9.128 45.014,8.556 45.014,7.568 C45.014,6.58 44.364,6.008 43.454,6.008 C42.544,6.008 41.894,6.58 41.894,7.568 Z M42.31,24 L44.546,24 L44.546,11 L42.31,11 L42.31,24 Z M47.926,24 L50.11,24 L50.11,16.33 C50.11,13.574 51.852,12.716 54.712,13.002 L54.712,10.818 C52.164,10.662 50.864,11.754 50.11,13.288 L50.11,11 L47.926,11 L47.926,24 Z M65.45,24 L65.45,21.66 C64.618,23.376 63.058,24.26 61.056,24.26 C57.598,24.26 55.856,21.322 55.856,17.5 C55.856,13.834 57.676,10.74 61.316,10.74 C63.214,10.74 64.67,11.598 65.45,13.288 L65.45,11 L67.686,11 L67.686,24 L65.45,24 Z M58.092,17.5 C58.092,20.62 59.34,22.18 61.654,22.18 C63.656,22.18 65.45,20.906 65.45,18.02 L65.45,16.98 C65.45,14.094 63.812,12.82 61.914,12.82 C59.392,12.82 58.092,14.484 58.092,17.5 Z M86.926,19.294 C86.926,16.226 84.898,15.056 81.284,14.146 C78.268,13.392 77.176,12.69 77.176,11.286 C77.176,9.726 78.502,8.946 80.738,8.946 C82.506,8.946 84.352,9.258 86.068,10.246 L86.068,7.906 C84.898,7.256 83.312,6.658 80.842,6.658 C76.864,6.658 74.836,8.634 74.836,11.286 C74.836,14.094 76.552,15.42 80.4,16.356 C83.65,17.136 84.586,17.942 84.586,19.45 C84.586,20.958 83.624,21.972 81.05,21.972 C78.788,21.972 76.344,21.374 74.758,20.542 L74.758,22.934 C76.084,23.61 77.618,24.26 80.92,24.26 C85.158,24.26 86.926,22.258 86.926,19.294 Z M95.09,24.26 C91.19,24.26 88.902,21.374 88.902,17.474 C88.902,13.574 91.19,10.74 95.09,10.74 C98.964,10.74 101.226,13.574 101.226,17.474 C101.226,21.374 98.964,24.26 95.09,24.26 Z M95.09,12.82 C92.308,12.82 91.086,15.004 91.086,17.474 C91.086,19.944 92.308,22.18 95.09,22.18 C97.846,22.18 99.042,19.944 99.042,17.474 C99.042,15.004 97.846,12.82 95.09,12.82 Z M106.92,9.622 C106.92,8.452 107.596,7.646 108.974,7.646 C109.494,7.646 109.988,7.698 110.378,7.776 L110.378,5.722 C109.988,5.618 109.546,5.514 108.87,5.514 C106.088,5.514 104.736,7.152 104.736,9.57 L104.736,11 L102.63,11 L102.63,13.08 L104.736,13.08 L104.736,24 L106.92,24 L106.92,13.08 L110.274,13.08 L110.274,11 L106.92,11 L106.92,9.622 Z M115.786,19.892 L115.786,13.08 L119.244,13.08 L119.244,11 L115.786,11 L115.786,8.244 L113.602,8.244 L113.602,11 L111.496,11 L111.496,13.08 L113.602,13.08 L113.602,19.944 C113.602,22.362 114.954,24 117.736,24 C118.412,24 118.854,23.896 119.244,23.792 L119.244,21.634 C118.854,21.712 118.36,21.816 117.84,21.816 C116.462,21.816 115.786,21.036 115.786,19.892 Z M125.432,24 L128.292,24 L130.528,17.708 L131.724,13.704 L132.92,17.708 L135.156,24 L138.016,24 L142.8,11 L140.33,11 L136.586,22.024 L132.79,11 L130.658,11 L126.862,22.024 L123.118,11 L120.648,11 L125.432,24 Z M153.538,24 L153.538,21.66 C152.706,23.376 151.146,24.26 149.144,24.26 C145.686,24.26 143.944,21.322 143.944,17.5 C143.944,13.834 145.764,10.74 149.404,10.74 C151.302,10.74 152.758,11.598 153.538,13.288 L153.538,11 L155.774,11 L155.774,24 L153.538,24 Z M146.18,17.5 C146.18,20.62 147.428,22.18 149.742,22.18 C151.744,22.18 153.538,20.906 153.538,18.02 L153.538,16.98 C153.538,14.094 151.9,12.82 150.002,12.82 C147.48,12.82 146.18,14.484 146.18,17.5 Z M159.154,24 L161.338,24 L161.338,16.33 C161.338,13.574 163.08,12.716 165.94,13.002 L165.94,10.818 C163.392,10.662 162.092,11.754 161.338,13.288 L161.338,11 L159.154,11 L159.154,24 Z M178.108,23.48 C177.042,24.052 175.404,24.26 174.078,24.26 C169.216,24.26 167.084,21.452 167.084,17.474 C167.084,13.548 169.268,10.74 173.22,10.74 C177.224,10.74 178.836,13.522 178.836,17.474 L178.836,18.488 L169.346,18.488 C169.658,20.698 171.088,22.128 174.156,22.128 C175.664,22.128 176.938,21.842 178.108,21.426 L178.108,23.48 Z M173.116,12.768 C170.75,12.768 169.554,14.302 169.32,16.564 L176.574,16.564 C176.444,14.146 175.352,12.768 173.116,12.768 Z",fill:"inherit",fillRule:"evenodd"}))))}const ne=r.forwardRef(te);n.p;var re=n(192),ae=n(189),ce=n(12),se=n(76),ie=n(500),oe=n(503);const de=e=>{let{fromId:t,type:n,referenceId:r,list:a}=e;const c=[...a],s=c.findIndex(e=>e.id===t);if(!r)return je([...c],s,c.length-1);const i=c.findIndex(e=>e.id===r);return("after"===n?je:le)([...c],s,i)},le=(e,t,n)=>{const r=e[n],a=e.splice(t,1)[0],c=e.indexOf(r);return e.splice(c,0,a),e},je=(e,t,n)=>{const r=e[n],a=e.splice(t,1)[0],c=e.indexOf(r);return e.splice(c+1,0,a),e},be=(e,t)=>{const n=Object(J.b)();return{onSuccess:()=>n.invalidateQueries(e),async onMutate(r){const a=n.getQueryData(e);return n.setQueryData(e,e=>t(r,e)),{previousItems:a}},onError(t,r,a){n.setQueryData(e,a.previousItems)}}},Oe=e=>be(e,(e,t)=>(null===t||void 0===t?void 0:t.map(t=>t.id===e.id?Object(u.a)(Object(u.a)({},t),e):t))||[]),ue=e=>be(e,(e,t)=>(null===t||void 0===t?void 0:t.filter(t=>t.id!==e.id))||[]),he=e=>be(e,(e,t)=>t?[...t,e]:[]),me=e=>{const t=k();return Object(ie.a)(["kanbans",h(e)],()=>t("kanbans",{data:e}))},pe=e=>{const t=k();return Object(oe.a)(e=>t("kanbans/reorder",{data:e,method:"POST"}),(e=>be(e,(e,t)=>de(Object(u.a)({list:t},e))))(e))},xe=e=>{const t=k();return Object(ie.a)(["projects",h(e)],()=>t("projects",{data:e}))},ge=e=>{const t=k();return Object(oe.a)(e=>t("projects/".concat(e.id),{method:"PATCH",data:e}),Oe(e))},ve=e=>{const t=k();return Object(oe.a)(e=>t("projects",{data:e,method:"POST"}),he(e))},fe=e=>{const t=k();return Object(ie.a)(["project",{id:e}],()=>t("projects/".concat(e)),{enabled:Boolean(e)})},ye=e=>{const[t]=Object(se.c)(),n=Ce(),[a]=Object(r.useState)(e);return[Object(r.useMemo)(()=>((e,t)=>{const n=Object.entries(e).filter(e=>{let[n]=e;return t.includes(n)});return Object.fromEntries(n)})(Object.fromEntries(t),a),[t,a]),e=>n(e)]},Ce=()=>{const[e,t]=Object(se.c)();return n=>{const r=h(Object(u.a)(Object(u.a)({},Object.fromEntries(e)),n));return t(r)}},ke=e=>{const t=k();return Object(ie.a)(["tasks",h(e)],()=>t("tasks",{data:e}))},Le=e=>{const t=k();return Object(oe.a)(e=>t("tasks/reorder",{data:e,method:"POST"}),(e=>be(e,(e,t)=>de(Object(u.a)({list:t},e)).map(t=>t.id===e.fromId?Object(u.a)(Object(u.a)({},t),{},{kanbanId:e.toKanbanId}):t)))(e))},Ie=()=>{var e;const{pathname:t}=Object(ce.o)(),n=null===(e=t.match(/projects\/(\d+)/))||void 0===e?void 0:e[1];return Number(n)},we=()=>fe(Ie()),Ee=()=>({projectId:Ie()}),Te=()=>["kanbans",Ee()],Me=()=>{const[e,t]=ye(["name","typeId","processorId","tagId"]),n=Ie(),a=m(e.name,200);return Object(r.useMemo)(()=>({projectId:n,typeId:Number(e.typeId)||void 0,processorId:Number(e.processorId)||void 0,tagId:Number(e.tagId)||void 0,name:a}),[n,e,a])},Pe=()=>["tasks",Me()],Se=()=>{const[{editingTaskId:e},t]=ye(["editingTaskId"]),{data:n,isLoading:a}=(e=>{const t=k();return Object(ie.a)(["task",{id:e}],()=>t("tasks/".concat(e)),{enabled:Boolean(e)})})(Number(e));return{editingTaskId:e,editingTask:n,startEdit:Object(r.useCallback)(e=>{t({editingTaskId:e})},[t]),close:Object(r.useCallback)(()=>{t({editingTaskId:""})},[t]),isLoading:a}},Fe=()=>{const e=k();return Object(ie.a)(["taskTypes"],()=>e("taskTypes"))};var Ne=n.p+"static/media/task.69774797.svg",Re=n.p+"static/media/bug.5d8e8fd5.svg",De=n(495),Ze=n(496),ze=n(279);const Ae=e=>{let{kanbanId:t}=e;const[n,a]=Object(r.useState)(""),{mutateAsync:c}=(e=>{const t=k();return Object(oe.a)(e=>t("tasks",{data:e,method:"POST"}),he(e))})(Pe()),s=Ie(),[i,o]=Object(r.useState)(!1),d=()=>o(e=>!e);return Object(r.useEffect)(()=>{i||a("")},[i]),i?Object(z.jsx)(De.a,{children:Object(z.jsx)(ze.a,{onBlur:d,placeholder:"\u9700\u8981\u505a\u4e9b\u4ec0\u4e48",autoFocus:!0,onPressEnter:async()=>{await c({projectId:s,name:n,kanbanId:t}),o(!1),a("")},onChange:e=>a(e.target.value)})}):Object(z.jsx)("div",{onClick:d,children:"+\u521b\u5efa\u4e8b\u52a1"})},Ye=e=>{let{name:t,keyword:n}=e;if(!n)return Object(z.jsx)(z.Fragment,{children:t});const r=t.split(n);return Object(z.jsx)(z.Fragment,{children:r.map((e,t)=>Object(z.jsxs)("span",{children:[e,t===r.length-1?null:Object(z.jsx)("span",{style:{color:"#257AFD"},children:n})]},t))})};var Be=n(150);const qe=["children"],_e=["children"],Ve=["children"],He=e=>{let{children:t}=e,n=Object(g.a)(e,qe);return Object(z.jsx)(Be.c,Object(u.a)(Object(u.a)({},n),{},{children:e=>a.a.isValidElement(t)?a.a.cloneElement(t,Object(u.a)(Object(u.a)({},e.droppableProps),{},{ref:e.innerRef,provided:e})):Object(z.jsx)("div",{})}))},Je=a.a.forwardRef((e,t)=>{var n;let{children:r}=e,a=Object(g.a)(e,_e);return Object(z.jsxs)("div",Object(u.a)(Object(u.a)({ref:t},a),{},{children:[r,null===(n=a.provided)||void 0===n?void 0:n.placeholder]}))}),Ke=e=>{let{children:t}=e,n=Object(g.a)(e,Ve);return Object(z.jsx)(Be.b,Object(u.a)(Object(u.a)({},n),{},{children:e=>a.a.isValidElement(t)?a.a.cloneElement(t,Object(u.a)(Object(u.a)(Object(u.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef})):Object(z.jsx)("div",{})}))};var Ue,Ge;const Qe=["kanban"],We=e=>{var t;let{id:n}=e;const{data:r}=Fe(),a=null===r||void 0===r||null===(t=r.find(e=>e.id===n))||void 0===t?void 0:t.name;return a?Object(z.jsx)("img",{alt:"task-icon",src:"task"===a?Ne:Re}):null},Xe=e=>{let{task:t}=e;const{startEdit:n}=Se(),{name:r}=Me();return Object(z.jsxs)(De.a,{onClick:()=>n(t.id),style:{marginBottom:"0.5rem",cursor:"pointer"},children:[Object(z.jsx)("p",{children:Object(z.jsx)(Ye,{keyword:r,name:t.name})}),Object(z.jsx)(We,{id:t.typeId})]},t.id)},$e=a.a.forwardRef((e,t)=>{let{kanban:n}=e,r=Object(g.a)(e,Qe);const{data:a}=ke(Me()),c=null===a||void 0===a?void 0:a.filter(e=>e.kanbanId===n.id);return Object(z.jsxs)(tt,Object(u.a)(Object(u.a)({},r),{},{ref:t,children:[Object(z.jsxs)(A,{between:!0,children:[Object(z.jsx)("h3",{children:n.name}),Object(z.jsx)(et,{kanban:n},n.id)]}),Object(z.jsxs)(nt,{children:[Object(z.jsx)(He,{type:"ROW",direction:"vertical",droppableId:String(n.id),children:Object(z.jsx)(Je,{style:{minHeight:"1rem"},children:null===c||void 0===c?void 0:c.map((e,t)=>Object(z.jsx)(Ke,{index:t,draggableId:"task"+e.id,children:Object(z.jsx)("div",{children:Object(z.jsx)(Xe,{task:e},e.id)})},e.id))})}),Object(z.jsx)(Ae,{kanbanId:n.id})]})]}))}),et=e=>{let{kanban:t}=e;const{mutateAsync:n}=(e=>{const t=k();return Object(oe.a)(e=>{let{id:n}=e;return t("kanbans/".concat(n),{method:"DELETE"})},ue(e))})(Te()),r=Object(z.jsx)(ae.a,{children:Object(z.jsx)(ae.a.Item,{children:Object(z.jsx)(D.a,{type:"link",onClick:()=>{Ze.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u770b\u677f\u5417\uff1f",onOk:()=>n({id:t.id})})},children:"\u5220\u9664"})})});return Object(z.jsx)(re.a,{overlay:r,children:Object(z.jsx)(D.a,{type:"link",children:"..."})})},tt=F.a.div(Ue||(Ue=Object(i.a)(["\n  min-width:27rem;\n  border-radius:6px;\n  background-color: rgb(244,245,247);\n  display:flex;\n  flex-direction:column;\n  padding:0.7rem 0.7rem 1rem;\n  margin-right:1.5rem;\n"]))),nt=F.a.div(Ge||(Ge=Object(i.a)(["\n  overflow:scroll;\n  flex:1;\n  ::-webkit-scrollbar{\n    display:none;\n  }\n"]))),rt=()=>{const[e,t]=Object(r.useState)(""),n=Ie(),{mutateAsync:a}=(e=>{const t=k();return Object(oe.a)(e=>t("kanbans",{data:e,method:"POST"}),he(e))})(Te());return Object(z.jsx)(tt,{children:Object(z.jsx)(ze.a,{size:"large",placeholder:"\u65b0\u5efa\u770b\u677f\u540d\u79f0",onPressEnter:async()=>{await a({name:e,projectId:n}),t("")},value:e,onChange:e=>t(e.target.value)})})};var at=n(153);const ct=["value","onChange","defaultOptionName","options"],st=e=>{const{value:t,onChange:n,defaultOptionName:r,options:a}=e,c=Object(g.a)(e,ct);return Object(z.jsxs)(at.a,Object(u.a)(Object(u.a)({value:null!==a&&void 0!==a&&a.length?it(t):0,onChange:e=>null===n||void 0===n?void 0:n(it(e)||void 0)},c),{},{children:[r?Object(z.jsx)(at.a.Option,{value:0,children:r}):null,null===a||void 0===a?void 0:a.map(e=>Object(z.jsxs)(at.a.Option,{value:e.id,children:[e.name," "]},e.id))]}))},it=e=>isNaN(Number(e))?0:Number(e),ot=e=>{const t=k();return Object(ie.a)(["users",h(e)],()=>t("users",{data:e}))},dt=e=>{const{data:t}=ot();return Object(z.jsx)(st,Object(u.a)({options:t||[]},e))},lt=e=>{const{data:t}=Fe();return Object(z.jsx)(st,Object(u.a)({options:t||[]},e))},jt=()=>{const e=Me(),t=Ce();return Object(z.jsxs)(A,{marginBottom:4,gap:!0,children:[Object(z.jsx)(ze.a,{style:{width:"20rem"},placeholder:"\u4efb\u52a1\u540d",value:e.name,onChange:e=>t({name:e.target.value})}),Object(z.jsx)(dt,{defaultOptionName:"\u7ecf\u529e\u4eba",value:e.processorId,onChange:e=>t({processorId:e})}),Object(z.jsx)(lt,{defaultOptionName:"\u7c7b\u578b",value:e.typeId,onChange:e=>t({typeId:e})}),Object(z.jsx)(D.a,{onClick:()=>{t({typeId:void 0,processorId:void 0,tagId:void 0,name:void 0})},children:"\u6e05\u9664\u7b5b\u9009\u5668"})]})};var bt=n(101),Ot=n(494);const ut={labelCol:{span:8},wrapperCol:{span:16}},ht=()=>{const[e]=Object(bt.useForm)(),{editingTaskId:t,editingTask:n,close:a}=Se(),{mutateAsync:c,isLoading:s}=(e=>{const t=k();return Object(oe.a)(e=>t("tasks/".concat(e.id),{method:"PATCH",data:e}),Oe(e))})(Pe()),{mutate:i}=(e=>{const t=k();return Object(oe.a)(e=>{let{id:n}=e;return t("tasks/".concat(n),{method:"DELETE"})},ue(e))})(Pe());return Object(r.useEffect)(()=>{e.setFieldsValue(n)},[e,n]),Object(z.jsxs)(Ze.a,{forceRender:!0,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",confirmLoading:s,title:"\u7f16\u8f91\u4efb\u52a1",open:!!t,onCancel:()=>{a(),e.resetFields()},onOk:async()=>{await c(Object(u.a)(Object(u.a)({},n),e.getFieldsValue())),a()},children:[Object(z.jsxs)(Ot.a,Object(u.a)(Object(u.a)({},ut),{},{initialValues:n,form:e,children:[Object(z.jsx)(Ot.a.Item,{label:"\u4efb\u52a1\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d"}],children:Object(z.jsx)(ze.a,{})}),Object(z.jsx)(Ot.a.Item,{label:"\u7ecf\u529e\u4eba",name:"processorId",children:Object(z.jsx)(dt,{defaultOptionName:"\u7ecf\u529e\u4eba"})}),Object(z.jsx)(Ot.a.Item,{label:"\u7c7b\u578b",name:"typeId",children:Object(z.jsx)(lt,{})})]})),Object(z.jsx)("div",{style:{textAlign:"right"},children:Object(z.jsx)(D.a,{onClick:()=>{Ze.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u4efb\u52a1\u5417\uff1f",onOk:()=>i({id:Number(t)})})},style:{fontSize:"14px"},size:"small",children:"\u5220\u9664"})})]})};var mt;const pt=()=>{p("\u770b\u677f\u5217\u8868");const{data:e}=we(),{data:t,isLoading:n}=me(Ee()),{isLoading:r}=ke(Me()),a=r||n,c=xt();return Object(z.jsx)(Be.a,{onDragEnd:c,children:Object(z.jsxs)(H,{children:[Object(z.jsxs)("h1",{children:[null===e||void 0===e?void 0:e.name,"\u770b\u677f"]}),Object(z.jsx)(jt,{}),a?Object(z.jsx)(N.a,{size:"large"}):Object(z.jsxs)(gt,{children:[Object(z.jsx)(He,{type:"COLUMN",direction:"horizontal",droppableId:"kanban",children:Object(z.jsx)(Je,{style:{display:"flex"},children:null===t||void 0===t?void 0:t.map((e,t)=>Object(z.jsx)(Ke,{draggableId:"kanban"+e.id,index:t,children:Object(z.jsx)($e,{kanban:e},e.id)},e.id))})}),Object(z.jsx)(rt,{})]}),Object(z.jsx)(ht,{})]})})},xt=()=>{const{data:e}=me(Ee()),{mutate:t}=pe(Te()),{mutate:n}=Le(Pe()),{data:a=[]}=ke(Me());return Object(r.useCallback)(r=>{let{source:c,destination:s,type:i}=r;if(s){if("COLUMN"===i){const n=null===e||void 0===e?void 0:e[c.index].id,r=null===e||void 0===e?void 0:e[s.index].id;if(!n||!r||n===r)return;const a=s.index>c.index?"after":"before";t({fromId:n,referenceId:r,type:a})}if("ROW"===i){const e=+c.droppableId,t=+s.droppableId;if(e===t)return;const r=a.filter(t=>t.kanbanId===e)[c.index],i=a.filter(e=>e.kanbanId===t)[s.index];if((null===r||void 0===r?void 0:r.id)===(null===i||void 0===i?void 0:i.id))return;n({fromId:null===r||void 0===r?void 0:r.id,referenceId:null===i||void 0===i?void 0:i.id,fromKanbanId:e,toKanbanId:t,type:e===t&&s.index>c.index?"after":"before"})}}},[e,t,a,n])},gt=Object(F.a)("div")(mt||(mt=Object(i.a)(["\n  display:flex;\n overflow-x:scroll;\n flex:1;\n"]))),vt=()=>({projectId:Ie()}),ft=()=>["epics",vt()];var yt,Ct=n(501),kt=n(148),Lt=n.n(kt),It=n(497);const wt=e=>{const{mutate:t,isLoading:n,error:a}=(e=>{const t=k();return Object(oe.a)(e=>t("epics",{data:e,method:"POST"}),he(e))})(ft()),[c]=Object(bt.useForm)(),s=Ie();return Object(r.useEffect)(()=>{c.resetFields()},[c,e.visible]),Object(z.jsx)(It.a,{visible:e.visible,onClose:e.onClose,forceRender:!0,destroyOnClose:!0,width:"100%",children:Object(z.jsx)(Et,{children:n?Object(z.jsx)(N.a,{size:"large"}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h1",{children:"\u521b\u5efa\u4efb\u52a1\u7ec4"}),Object(z.jsx)(_,{error:a}),Object(z.jsxs)(Ot.a,{form:c,layout:"vertical",style:{width:"40rem"},onFinish:async n=>{await t(Object(u.a)(Object(u.a)({},n),{},{projectId:s})),e.onClose()},children:[Object(z.jsx)(Ot.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d"}],children:Object(z.jsx)(ze.a,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"})}),Object(z.jsx)(Ot.a.Item,{children:Object(z.jsx)(D.a,{loading:n,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},Et=F.a.div(yt||(yt=Object(i.a)(["\n  height: 80vh;\n  display:flex;\n  justify-content:center;\n  align-items:center;\n  flex-direction:column;\n"]))),Tt=()=>{const{data:e}=we(),{data:t}=(e=>{const t=k();return Object(ie.a)(["epics",h(e)],()=>t("epics",{data:e}))})(vt()),{data:n}=ke({projectId:null===e||void 0===e?void 0:e.id}),{mutate:a}=(e=>{const t=k();return Object(oe.a)(e=>{let{id:n}=e;return t("epics/".concat(n),{method:"DELETE"})},ue(e))})(ft()),[c,s]=Object(r.useState)(!1);return Object(z.jsxs)(H,{children:[Object(z.jsxs)("h1",{children:[null===e||void 0===e?void 0:e.name,"\u4efb\u52a1\u7ec4"]}),Object(z.jsx)(D.a,{onClick:()=>s(!0),type:"link",children:"\u521b\u5efa\u4efb\u52a1\u7ec4"}),Object(z.jsx)(Ct.b,{style:{overflow:"scroll"},dataSource:t,itemLayout:"vertical",renderItem:t=>Object(z.jsxs)(Ct.b.Item,{children:[Object(z.jsx)(Ct.b.Item.Meta,{title:Object(z.jsxs)(A,{between:!0,children:[Object(z.jsx)("span",{children:t.name}),Object(z.jsx)(D.a,{type:"link",children:"\u5220\u9664"})]}),description:Object(z.jsxs)("div",{children:[Object(z.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4:",Lt()(t.start).format("YYYY-MM-DD")]}),Object(z.jsxs)("div",{children:["\u7ed3\u675f\u65f6\u95f4:",Lt()(t.end).format("YYYY-MM-DD")]})]})}),Object(z.jsx)("div",{children:null===n||void 0===n?void 0:n.filter(e=>e.epicId===t.id).map(t=>Object(z.jsx)(se.b,{to:"/projects/".concat(null===e||void 0===e?void 0:e.id,"/kanban?editingTaskId=").concat(t.id),children:t.name},t.id))})]})}),Object(z.jsx)(wt,{onClose:()=>s(!1),visible:c})]})};var Mt,Pt,St;const Ft=()=>{const e=Object(ce.o)(),t=(()=>{const e=Object(ce.o)().pathname.split("/");return e[e.length-1]})();return Object(z.jsxs)(Dt,{children:[Object(z.jsx)(Nt,{children:Object(z.jsxs)(ae.a,{mode:"inline",selectedKeys:[t],children:[Object(z.jsx)(ae.a.Item,{children:Object(z.jsx)(se.b,{to:"kanban",children:"\u770b\u677f"})},"kanban"),Object(z.jsx)(ae.a.Item,{children:Object(z.jsx)(se.b,{to:"epic",children:"\u4efb\u52a1\u7ec4"})},"epic")]})}),Object(z.jsx)(Rt,{children:Object(z.jsxs)(ce.d,{children:[Object(z.jsx)(ce.b,{path:"/kanban",element:Object(z.jsx)(pt,{})}),Object(z.jsx)(ce.b,{path:"/epic",element:Object(z.jsx)(Tt,{})}),Object(z.jsx)(ce.b,{element:Object(z.jsx)(ce.a,{replace:!0,to:"".concat(e.pathname,"/kanban")})}),Object(z.jsx)(ce.b,{path:"*",element:Object(z.jsx)(ce.a,{replace:!0,to:"".concat(e.pathname,"/kanban")})})]})})]})},Nt=F.a.aside(Mt||(Mt=Object(i.a)(["\n  background-color:rgb(244,245,247);\n  display:flex;\n"]))),Rt=F.a.div(Pt||(Pt=Object(i.a)(["\n  box-shadow:-5px 0 -5px rgba(0,0,0,0.1);\n  display:flex;\n  overflow:hidden;\n"]))),Dt=F.a.div(St||(St=Object(i.a)(["\n  display:grid;\n  grid-template-columns:16rem 1fr;\n  overflow:hidden;\n  width: 100%;\n"])));var Zt=n(492),zt=n(498);const At=["checked","onCheckedChange"],Yt=e=>{let{checked:t,onCheckedChange:n}=e,r=Object(g.a)(e,At);return Object(z.jsx)(zt.a,Object(u.a)({count:1,value:t?1:0,onChange:e=>null===n||void 0===n?void 0:n(!!e)},r))},Bt=()=>{const[e,t]=ye(["name","personId"]);return[Object(r.useMemo)(()=>Object(u.a)(Object(u.a)({},e),{},{personId:Number(e.personId)||void 0}),[e]),t]},qt=()=>{const[e]=Bt();return["projects",e]},_t=()=>{const[{projectCreate:e},t]=ye(["projectCreate"]),[{editingProjectId:n},r]=ye(["editingProjectId"]),a=Ce(),{data:c,isLoading:s}=fe(Number(n));return{projectModalOpen:"true"===e||Boolean(n),open:()=>t({projectCreate:!0}),close:()=>a({projectCreate:"",editingProjectId:""}),startEdit:e=>r({editingProjectId:e}),editingProject:c,isLoading:s}},Vt=["users"],Ht=e=>{let{users:t}=e,n=Object(g.a)(e,Vt);const{mutate:r}=ge(qt());return Object(z.jsx)(Zt.a,Object(u.a)({rowKey:"id",pagination:!1,columns:[{title:Object(z.jsx)(Yt,{checked:!0,disabled:!0}),render(e,t){return Object(z.jsx)(Yt,{checked:t.pin,onCheckedChange:(n=t.id,e=>r({id:n,pin:e}))});var n}},{title:"\u540d\u79f0",dataIndex:"name",sorter:(e,t)=>e.name.localeCompare(t.name),render:(e,t)=>Object(z.jsx)(se.b,{to:String(t.id),children:t.name})},{title:"\u90e8\u95e8",dataIndex:"organization",sorter:(e,t)=>e.name.localeCompare(t.name)},{title:"\u8d1f\u8d23\u4eba",render(e,n){var r;return Object(z.jsx)("span",{children:(null===(r=t.find(e=>e.id===n.personId))||void 0===r?void 0:r.name)||"\u672a\u77e5"})}},{title:"\u521b\u5efa\u65f6\u95f4",render:(e,t)=>Object(z.jsx)("span",{children:t.created?Lt()(t.created).format("YYYY-MM-DD"):"\u65e0"})},{render:(e,t)=>Object(z.jsx)(Jt,{project:t})}]},n))},Jt=e=>{let{project:t}=e;const{startEdit:n}=_t(),{mutate:r}=(e=>{const t=k();return Object(oe.a)(e=>{let{id:n}=e;return t("projects/".concat(n),{method:"DELETE"})},ue(e))})(qt());return Object(z.jsx)(re.a,{overlay:Object(z.jsxs)(ae.a,{children:[Object(z.jsx)(ae.a.Item,{children:Object(z.jsx)(V,{type:"link",onClick:(a=t.id,()=>n(a)),children:"\u7f16\u8f91"})},"edit"),Object(z.jsx)(ae.a.Item,{children:Object(z.jsx)(V,{type:"link",onClick:()=>(e=>{Ze.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u9879\u76ee\u5417",content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk(){r({id:e})}})})(t.id),children:"\u5220\u9664"})},"delete")]}),children:Object(z.jsx)(V,{type:"link",children:"..."})});var a};var Kt,Ut=n(141);function Gt(e){let{param:t,setParam:n,users:r}=e;return Object(Ut.b)(Ot.a,{css:{marginBottom:"2rem"},layout:"inline",children:[Object(Ut.a)(Ot.a.Item,{children:Object(Ut.a)(ze.a,{placeholder:"\u9879\u76ee\u540d",type:"text",value:t.name,onChange:e=>n(Object(u.a)(Object(u.a)({},t),{},{name:e.target.value}))})}),Object(Ut.a)(Ot.a.Item,{children:Object(Ut.a)(dt,{defaultOptionName:"\u8d1f\u8d23\u4eba",value:t.personId,onChange:e=>{n(Object(u.a)(Object(u.a)({},t),{},{personId:e}))}})})]})}const Qt=()=>{p("\u9879\u76ee\u5217\u8868",!1);const[e,t]=Bt(),{isLoading:n,error:r,data:a}=xe(m(e,200)),{data:c}=ot(),{open:s}=_t();return Object(z.jsxs)(Wt,{children:[Object(z.jsxs)(A,{between:!0,children:[Object(z.jsx)("h1",{children:"\u9879\u76ee\u5217\u8868"}),Object(z.jsx)(V,{onClick:s,type:"link",children:"\u521b\u5efa\u9879\u76ee"})]}),Object(z.jsx)(Gt,{param:e,setParam:t,users:c||[]}),r?Object(z.jsx)(R.a.Text,{type:"danger",children:r.message}):null,Object(z.jsx)(Ht,{loading:n,users:c||[],dataSource:a||[]})]})};Qt.whyDidYouRender=!1;const Wt=F.a.div(Kt||(Kt=Object(i.a)(["\n  width: 100%;\n  padding:3.2rem;\n"])));var Xt;const $t=()=>{const{projectModalOpen:e,close:t,isLoading:n,editingProject:a}=_t(),c=a?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee",s=a?ge:ve,[i]=Object(bt.useForm)(),{mutateAsync:o,error:d,isLoading:l}=s(qt());Object(r.useEffect)(()=>{i.setFieldsValue(a)},[a,i]);return Object(z.jsx)(It.a,{forceRender:!0,onClose:()=>{i.resetFields(),t()},open:e,width:"100%",children:Object(z.jsx)(en,{children:n?Object(z.jsx)(N.a,{size:"large"}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("h1",{children:c}),Object(z.jsx)(_,{error:d}),Object(z.jsxs)(Ot.a,{form:i,layout:"vertical",style:{width:"40rem"},onFinish:e=>{o(Object(u.a)(Object(u.a)({},a),e)).then(()=>{i.resetFields(),t()})},children:[Object(z.jsx)(Ot.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d"}],children:Object(z.jsx)(ze.a,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"})}),Object(z.jsx)(Ot.a.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"}],children:Object(z.jsx)(ze.a,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0"})}),Object(z.jsx)(Ot.a.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId",children:Object(z.jsx)(dt,{defaultOptionName:"\u8d1f\u8d23\u4eba"})}),Object(z.jsx)(Ot.a.Item,{children:Object(z.jsx)(D.a,{loading:l,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},en=F.a.div(Xt||(Xt=Object(i.a)(["\n  height: 80vh;\n  display:flex;\n  justify-content:center;\n  align-items:center;\n  flex-direction:column;\n"])));var tn,nn=n(491),rn=n(502);const an=()=>{const{open:e}=_t(),{data:t,refetch:n}=xe(),r=null===t||void 0===t?void 0:t.filter(e=>e.pin),a=Object(z.jsxs)(cn,{children:[Object(z.jsx)(R.a.Text,{type:"secondary",children:"\u6536\u85cf\u9879\u76ee"}),Object(z.jsx)(Ct.b,{children:null===r||void 0===r?void 0:r.map(e=>Object(z.jsx)(Ct.b.Item,{children:Object(z.jsx)(Ct.b.Item.Meta,{title:e.name})},e.id))}),Object(z.jsx)(nn.a,{}),Object(z.jsx)(V,{onClick:e,type:"link",children:"\u521b\u5efa\u9879\u76ee"})]});return Object(z.jsx)(rn.a,{placement:"bottom",content:a,onOpenChange:()=>n(),children:Object(z.jsx)("span",{children:"\u9879\u76ee"})})},cn=F.a.div(tn||(tn=Object(i.a)(["\n  min-width:30rem\n"])));var sn;const on=()=>{const{data:e,refetch:t}=ot(),n=Object(z.jsxs)(dn,{children:[Object(z.jsx)(R.a.Text,{type:"secondary",children:"\u7ec4\u5458\u5217\u8868"}),Object(z.jsx)(Ct.b,{children:null===e||void 0===e?void 0:e.map(e=>Object(z.jsx)(Ct.b.Item,{children:Object(z.jsx)(Ct.b.Item.Meta,{title:e.name})},e.id))}),Object(z.jsx)(nn.a,{})]});return Object(z.jsx)(rn.a,{placement:"bottom",content:n,onOpenChange:()=>t(),children:Object(z.jsx)("span",{children:"\u7ec4\u5458"})})},dn=F.a.div(sn||(sn=Object(i.a)(["\n  min-width:30rem\n"])));var ln,jn,bn,On,un;const hn=()=>Object(z.jsx)(xn,{children:Object(z.jsxs)(se.a,{children:[Object(z.jsx)(mn,{}),Object(z.jsx)(yn,{children:Object(z.jsxs)(ce.d,{children:[Object(z.jsx)(ce.b,{path:"/projects",element:Object(z.jsx)(Qt,{})}),Object(z.jsx)(ce.b,{path:"/projects/:projectId/*",element:Object(z.jsx)(Ft,{})}),Object(z.jsx)(ce.b,{path:"*",element:Object(z.jsx)(ce.a,{replace:!0,to:"/projects"})})]})}),Object(z.jsx)($t,{})]})}),mn=()=>Object(z.jsxs)(gn,{between:!0,children:[Object(z.jsxs)(vn,{gap:!0,children:[Object(z.jsx)(V,{type:"link",onClick:x,children:Object(z.jsx)(ne,{width:"18rem",color:"rgb(38,132,255)"})}),Object(z.jsx)(an,{}),Object(z.jsx)(on,{})]}),Object(z.jsx)(fn,{children:Object(z.jsx)(pn,{})})]}),pn=()=>{const{logout:e,user:t}=Q();return Object(z.jsx)(re.a,{overlay:Object(z.jsx)(ae.a,{children:Object(z.jsx)(ae.a.Item,{children:Object(z.jsx)(D.a,{type:"link",onClick:e,children:"\u767b\u51fa"})},"logout")}),children:Object(z.jsxs)(D.a,{type:"link",onClick:e=>{e.preventDefault()},children:["Hi,",null===t||void 0===t?void 0:t.name]})})},xn=F.a.div(ln||(ln=Object(i.a)(["\n  display:grid;\n  grid-template-rows: 6rem calc(100vh-6rem);\n"]))),gn=Object(F.a)(A)(jn||(jn=Object(i.a)(["\n  padding:3.2rem;\n  /* display:grid;\n  grid-template-rows:6rem 1fr;\n  height: 100vh; */\n  box-shadow:0 0 5px 0 rgb(0,0,0,0.1);\n  z-index:1;\n"]))),vn=Object(F.a)(A)(bn||(bn=Object(i.a)([""]))),fn=F.a.div(On||(On=Object(i.a)([""]))),yn=F.a.main(un||(un=Object(i.a)(["\n  display:flex;\n  overflow:hidden;\n  height:calc(100vh-6rem)\n"]))),Cn=["cpassword"],kn=e=>{let{onError:t}=e;const{register:n}=Q(),{run:r,isLoading:a}=E(void 0,{throwOnError:!0});return Object(z.jsxs)(Ot.a,{onFinish:async e=>{let{cpassword:a}=e,c=Object(g.a)(e,Cn);if(a===c.password)try{await r(n(c))}catch(s){t(s)}else t(new Error("\u8bf7\u786e\u8ba4\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u76f8\u540c"))},children:[Object(z.jsx)(Ot.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(z.jsx)(ze.a,{type:"text",id:"username",placeholder:"\u7528\u6237\u540d"})}),Object(z.jsx)(Ot.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(z.jsx)(ze.a,{type:"password",id:"password",placeholder:"\u5bc6\u7801"})}),Object(z.jsx)(Ot.a.Item,{name:"cpassword",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801"}],children:Object(z.jsx)(ze.a,{type:"cpassword",id:"cpassword",placeholder:"\u786e\u8ba4\u5bc6\u7801"})}),Object(z.jsx)(Ot.a.Item,{children:Object(z.jsx)(Dn,{loading:a,htmlType:"submit",type:"primary",children:"\u6ce8\u518c"})})]})};var Ln=n(105);const In=e=>{let{onError:t}=e;const{login:n}=Q(),{run:r,isLoading:a}=E(void 0,{throwOnError:!0}),c=Object(Ln.c)();return Object(z.jsxs)(Ot.a,{onFinish:async e=>{c(n(e));try{await r(n(e))}catch(a){t(a)}},children:[Object(z.jsx)(Ot.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(z.jsx)(ze.a,{type:"text",id:"username",placeholder:"\u7528\u6237\u540d"})}),Object(z.jsx)(Ot.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(z.jsx)(ze.a,{type:"password",id:"password",placeholder:"\u5bc6\u7801"})}),Object(z.jsx)(Ot.a.Item,{children:Object(z.jsx)(Dn,{loading:a,htmlType:"submit",type:"primary",children:"\u767b\u5f55"})})]})};var wn,En,Tn,Mn,Pn,Sn,Fn=n.p+"static/media/logo.6c866125.svg",Nn=n.p+"static/media/right.b423a6cf.svg";const Rn=()=>{const[e,t]=Object(r.useState)(!1),[n,a]=Object(r.useState)(null);return Object(z.jsxs)(Bn,{style:{display:"flex",justifyContent:"center"},children:[Object(z.jsx)(An,{}),Object(z.jsx)(zn,{}),Object(z.jsxs)(Yn,{children:[Object(z.jsx)(Zn,{children:e?"\u8bf7\u6ce8\u518c":"\u8bf7\u767b\u5f55"}),n?Object(z.jsx)(R.a.Text,{type:"danger",children:n.message}):null,e?Object(z.jsx)(kn,{onError:a}):Object(z.jsx)(In,{onError:a}),Object(z.jsx)(nn.a,{}),Object(z.jsx)(D.a,{type:"link",onClick:()=>{t(!e)},children:e?"\u5df2\u6709\u8d26\u53f7\uff1f\u8bf7\u767b\u5f55":"\u6ca1\u6709\u8d26\u53f7\uff1f\u6ce8\u518c\u65b0\u8d26\u53f7"})]})]})},Dn=Object(F.a)(D.a)(wn||(wn=Object(i.a)(["\n  width: 100%;\n"]))),Zn=F.a.h2(En||(En=Object(i.a)(["\n  margin-bottom:2.4rem;\n  color: rgb(94,108,132);\n"]))),zn=F.a.div(Tn||(Tn=Object(i.a)(["\n  position:absolute;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  /* \u662f\u5426\u4f1a\u968f\u7740\u9875\u9762\u7684\u6ed1\u52a8\u800c\u6ed1\u52a8 */\n  background-attachment: fixed;\n  background-position: left bottom,right bottom;\n  background-size:calc(((100vw-40rem)/2)-3.2rem),calc(((100vw-40rem)/2)-3.2rem),cover;\n  background-image:url(","), url(",");\n"])),Nn,Nn),An=F.a.header(Mn||(Mn=Object(i.a)(["\n  background:url(",") no-repeat center;\n  padding:5rem 0;\n  background-size:8rem;\n  width:100%;\n"])),Fn),Yn=Object(F.a)(De.a)(Pn||(Pn=Object(i.a)(["\n  width:40rem;\n  min-height:56rem;\n  padding:3.2rem 4rem;\n  border-radius:0.3rem;\n  box-sizing:border-box;\n  box-shadow:rgba(0,0,0,0.1) 0 0 10px;\n  text-align:center;\n"]))),Bn=F.a.div(Sn||(Sn=Object(i.a)(["\n  display:flex;\n  flex-direction:column;\n  align-items: center;\n  min-height:10vh;\n\n\n"])));class qn extends r.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}render(){const{error:e}=this.state,{fallbackRender:t,children:n}=this.props;return e?t({error:e}):n}}var _n=function(){const{user:e}=Q();return Object(z.jsx)("div",{className:"App",children:Object(z.jsx)(qn,{fallbackRender:q,children:e?Object(z.jsx)(hn,{}):Object(z.jsx)(Rn,{})})})};var Vn=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,504)).then(t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:c,getTTFB:s}=t;n(e),r(e),a(e),c(e),s(e)})},Hn=(n(486),n(499)),Jn=n(134);const Kn=Object(Jn.b)({name:"prejectListSlice",initialState:{projectModalOpen:!1},reducers:{openProjectModal(e){e.projectModalOpen=!0},closeProjectModal(e){e.projectModalOpen=!1}}}),Un=(Kn.actions,Object(Jn.b)({name:"auth",initialState:{user:null},reducers:{setUser(e,t){e.user=t.payload}}})),{setUser:Gn}=Un.actions,Qn={projectList:Kn.reducer,auth:Un.reducer},Wn=Object(Jn.a)({reducer:Qn}),Xn=e=>{let{children:t}=e;return Object(z.jsx)(Ln.a,{store:Wn,children:Object(z.jsx)(J.a,{client:new Hn.a,children:Object(z.jsx)(G,{children:t})})})};n(208);Object(Z.b)(()=>s.a.render(Object(z.jsxs)(a.a.StrictMode,{children:[Object(z.jsx)(Z.a,{}),Object(z.jsx)(Xn,{children:Object(z.jsx)(_n,{})})]}),document.getElementById("root"))),Vn()}},[[487,1,2]]]);
//# sourceMappingURL=main.3995feff.chunk.js.map